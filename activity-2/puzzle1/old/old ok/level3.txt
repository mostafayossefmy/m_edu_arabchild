<!DOCTYPE html>
<html lang="ar">

<head>
    
    <meta charset="UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูุนุจุฉ ุจุงุฒู 4x4</title>
    <style>
        /* ุชูุณูู ุงูุฌุณู ูุงูุตูุญุฉ */
        body {
            font-family: Arial, sans-serif; /* ููุน ุงูุฎุท ุงููุณุชุฎุฏู */
            display: flex; /* ุงุณุชุฎุฏุงู Flexbox ูุชูุธูู ุงูุนูุงุตุฑ */
            justify-content: center; /* ุชูุณูุท ุงูุนูุงุตุฑ ุฃูููุงู */
            align-items: center; /* ุชูุณูุท ุงูุนูุงุตุฑ ุนููุฏูุงู */
            flex-direction: column; /* ุชุฑุชูุจ ุงูุนูุงุตุฑ ุนููุฏูุงู */
            height: 100vh; /* ุฌุนู ุงุฑุชูุงุน ุงูุฌุณู ูููุฃ ุงูุดุงุดุฉ ุจุงููุงูู */
            margin: 0; /* ุฅุฒุงูุฉ ุงูููุงูุด ุงูุงูุชุฑุงุถูุฉ */
            background-color: #f0f0f0; /* ููู ุงูุฎูููุฉ */
            overflow: hidden; /* ููุน ุธููุฑ ุดุฑูุท ุงูุชูุฑูุฑ */
            position: relative; /* ูุชุญุฏูุฏ ูููุน ุงูุจุงูููุงุช */
            background-image: url('images/bg_level3.png'); /* ุชุนููู ุตูุฑุฉ ุงูุฎูููุฉ */
            background-size: cover; /* ุฌุนู ุงูุฎูููุฉ ุชุบุทู ุงูุดุงุดุฉ ุจุงููุงูู */
            background-repeat: no-repeat; /* ููุน ุชูุฑุงุฑ ุงูุฎูููุฉ */
        }

        /* ุชูุณูู ุงูุนูุงููู ูุงููุตูุต */
        h1 {
            color: #333; /* ููู ุงูุฎุท */
            margin-bottom: 20px; /* ุงููุณุงูุฉ ุฃุณูู ุงูุนููุงู */
            display: none; /* ุฅุฎูุงุก ุงูุนููุงู */
        }

        p {
            margin-bottom: 20px; /* ุงููุณุงูุฉ ุฃุณูู ุงููุต */
            color: #555; /* ููู ุงูุฎุท */
            display: none; /* ุฅุฎูุงุก ุงููุต */
        }

        /* ุญุงููุฉ ุงููุนุจุฉ ุงูุฑุฆูุณูุฉ */
        .game-container {
            display: flex; /* ุงุณุชุฎุฏุงู Flexbox */
            flex-direction: column; /* ุชุฑุชูุจ ุงูุนูุงุตุฑ ุนููุฏูุงู */
            align-items: center; /* ุชูุณูุท ุงูุนูุงุตุฑ ุฃูููุงู */
            position: relative; /* ูุชุญุฏูุฏ ูููุน ุงูุนูุงุตุฑ ุงูุฏุงุฎููุฉ */
            z-index: 10; /* ุชุฑุชูุจ ุงูุนูุตุฑ ููู ุงูุนูุงุตุฑ ุงูุฃุฎุฑู */
        }

        /* ุญุงููุฉ ุงููุฑุจุนุงุช ุงูุฃุณุงุณูุฉ (ุงูุญู) */
        #solution-container {
            display: grid; /* ุงุณุชุฎุฏุงู Grid ูุชูุธูู ุงููุฑุจุนุงุช */
            grid-template-columns: repeat(4, 100px); /* 4 ุฃุนูุฏุฉ ุจุนุฑุถ 100 ุจูุณู */
            grid-template-rows: repeat(4, 100px); /* 4 ุตููู ุจุงุฑุชูุงุน 100 ุจูุณู */
            gap: 5px; /* ุงููุณุงูุฉ ุจูู ุงููุฑุจุนุงุช */
            border: 2px solid #ccc; /* ุฅุทุงุฑ ุงูุญุงููุฉ */
            padding: 5px; /* ุญุดูุฉ ุฏุงุฎููุฉ */
            background-color: #fff; /* ููู ุงูุฎูููุฉ */
            min-height: 410px; /* ุงูุญุฏ ุงูุฃุฏูู ููุงุฑุชูุงุน */
            z-index: 10; /* ุชุฑุชูุจ ุงูุนูุตุฑ ููู ุงูุนูุงุตุฑ ุงูุฃุฎุฑู */
            margin-bottom: 20px; /* ุงููุณุงูุฉ ุฃุณูู ุงูุญุงููุฉ */
            transition: all 0.5s ease-in-out; /* ุชุฃุซูุฑ ุงูุชุญูู ุงูุณูุณ */
        }

        /* ุชูุณูู ูุฑุจุน ุงูุญู ูุตูุฑุฉ ูุงุญุฏุฉ ุจุนุฏ ุงูุงูุชูุงุก */
        #solution-container.solved {
            display: block; /* ุนุฑุถ ุงูุนูุตุฑ ููุชูุฉ */
            width: 405px; /* ุนุฑุถ ุงูุตูุฑุฉ ุงููุงููุฉ */
            height: 405px; /* ุงุฑุชูุงุน ุงูุตูุฑุฉ ุงููุงููุฉ */
            background-size: cover; /* ุฌุนู ุงูุฎูููุฉ ุชุบุทู ุงููุณุงุญุฉ */
            background-position: center; /* ุชูุณูุท ุงูุฎูููุฉ */
        }

        /* ููุทูุฉ ุงูุฅููุงุช (ูุฑุจุน ูุงุฑุบ) */
        .drop-zone {
            width: 100px; /* ุนุฑุถ ุงููุฑุจุน */
            height: 100px; /* ุงุฑุชูุงุน ุงููุฑุจุน */
            background-color: #eee; /* ููู ุงูุฎูููุฉ */
            border: 2px dashed #999; /* ุฅุทุงุฑ ูููุท */
            display: flex; /* ุงุณุชุฎุฏุงู Flexbox */
            justify-content: center; /* ุชูุณูุท ุงููุญุชูู ุฃูููุงู */
            align-items: center; /* ุชูุณูุท ุงููุญุชูู ุนููุฏูุงู */
            color: #999; /* ููู ุงููุต */
            font-size: 14px; /* ุญุฌู ุงูุฎุท */
            box-sizing: border-box; /* ุงุญุชุณุงุจ ุงููุงูุด ูุงูุญุฏูุฏ ุถูู ุงูุญุฌู */
        }

        .drop-zone.hovered {
            background-color: #d0d0d0; /* ููู ุงูุฎูููุฉ ุนูุฏ ุงูุชุญููู */
            border-color: #333; /* ููู ุงูุฅุทุงุฑ ุนูุฏ ุงูุชุญููู */
        }

        .drop-zone .puzzle-piece {
            border: none; /* ุฅุฒุงูุฉ ุฅุทุงุฑ ูุทุนุฉ ุงูุจุงุฒู ุฏุงุฎู ูุฑุจุน ุงูุฅููุงุช */
            cursor: default; /* ุชุบููุฑ ุดูู ุงููุคุดุฑ */
        }

        /* ุญุงููุฉ ุฃุฌุฒุงุก ุงูุตูุฑุฉ (ุงููุฑุจุนุงุช ุงูุชู ูุชู ุณุญุจูุง) */
        #puzzle-container {
            display: grid; /* ุงุณุชุฎุฏุงู Grid ูุชูุธูู ุงููุฑุจุนุงุช */
            grid-template-columns: repeat(4, 100px); /* 4 ุฃุนูุฏุฉ ุจุนุฑุถ 100 ุจูุณู */
            grid-template-rows: repeat(4, 100px); /* 4 ุตููู ุจุงุฑุชูุงุน 100 ุจูุณู */
            gap: 5px; /* ุงููุณุงูุฉ ุจูู ุงููุฑุจุนุงุช */
            border: 2px solid #ccc; /* ุฅุทุงุฑ ุงูุญุงููุฉ */
            padding: 5px; /* ุญุดูุฉ ุฏุงุฎููุฉ */
            background-color: #fff; /* ููู ุงูุฎูููุฉ */
            min-height: 410px; /* ุงูุญุฏ ุงูุฃุฏูู ููุงุฑุชูุงุน */
            transition: opacity 0.5s ease-in-out; /* ุชุฃุซูุฑ ุงูุชุญูู ุงูุณูุณ */
            z-index: 10; /* ุชุฑุชูุจ ุงูุนูุตุฑ ููู ุงูุนูุงุตุฑ ุงูุฃุฎุฑู */
        }

        /* ุฅุฎูุงุก ุญุงููุฉ ุงูุฃุฌุฒุงุก ุนูุฏ ุงูุงูุชูุงุก */
        #puzzle-container.hidden {
            opacity: 0; /* ุฌุนู ุงูุนูุตุฑ ุดูุงูุงู ุชูุงูุงู */
            pointer-events: none; /* ููุน ุงูุชูุงุนู ูุน ุงูุนูุตุฑ */
            height: 0; /* ุฌุนู ุงูุงุฑุชูุงุน ุตูุฑุงู */
            padding: 0; /* ุฅุฒุงูุฉ ุงูุญุดูุฉ */
            margin-top: 0; /* ุฅุฒุงูุฉ ุงููุงูุด ุงูุนููู */
        }

        /* ูุทุนุฉ ุงูุจุงุฒู (ุฌุฒุก ูู ุงูุตูุฑุฉ) */
        .puzzle-piece {
            width: 100px; /* ุนุฑุถ ุงููุทุนุฉ */
            height: 100px; /* ุงุฑุชูุงุน ุงููุทุนุฉ */
            background-size: 400px 400px; /* ุญุฌู ุงูุตูุฑุฉ ุงูุฃุตููุฉ ููุฎูููุฉ */
            cursor: grab; /* ุชุบููุฑ ุดูู ุงููุคุดุฑ */
            border: 1px solid #ddd; /* ุฅุทุงุฑ ุงููุทุนุฉ */
            box-sizing: border-box; /* ุงุญุชุณุงุจ ุงููุงูุด ูุงูุญุฏูุฏ ุถูู ุงูุญุฌู */
            transition: transform 0.2s ease-in-out; /* ุชุฃุซูุฑ ุงูุชุญูู ุงูุณูุณ */
        }

        .puzzle-piece.dragging {
            opacity: 0.7; /* ุดูุงููุฉ ุงููุทุนุฉ ุฃุซูุงุก ุงูุณุญุจ */
            border: 2px dashed #333; /* ุฅุทุงุฑ ูููุท ุฃุซูุงุก ุงูุณุญุจ */
        }

        /* ุฑุณุงูุฉ ุงูููุฒ */
        #message {
            position: absolute; /* ูุถุน ุงูุฑุณุงูุฉ ูู ููุถุน ูุทูู */
            top: 20px; /* ุงููุณุงูุฉ ูู ุงูุฃุนูู */
            font-size: 30px; /* ุญุฌู ุงูุฎุท */
            font-weight: bold; /* ุฌุนู ุงูุฎุท ุนุฑูุถุงู */
            color: green; /* ููู ุงูุฎุท */
            z-index: 10; /* ุชุฑุชูุจ ุงูุนูุตุฑ ููู ุงูุนูุงุตุฑ ุงูุฃุฎุฑู */
            text-align: center; /* ุชูุณูุท ุงููุต */
            width: 100%; /* ุนุฑุถ ุงูุนูุตุฑ ุจูุณุจุฉ 100% */
        }

        /* ุญุงููุฉ ุฃููููุงุช ุงูุชุญูู (ูู ุงูุฃุณูู) */
        #controls-container {
            position: absolute; /* ูุถุน ุงูุญุงููุฉ ูู ููุถุน ูุทูู */
            bottom: 20px; /* ุงููุณุงูุฉ ูู ุงูุฃุณูู */
            left: 50%; /* ุชุญุฏูุฏ ุงูููุถุน ุงูุฃูุณุฑ ุจูุณุจุฉ 50% */
            transform: translateX(-50%); /* ุชูุณูุท ุงูุนูุตุฑ ุฃูููุงู */
            display: flex; /* ุงุณุชุฎุฏุงู Flexbox */
            gap: 30px; /* ุงููุณุงูุฉ ุจูู ุงูุฃููููุงุช */
            z-index: 15; /* ุชุฑุชูุจ ุงูุนูุตุฑ ููู ุงูุนูุงุตุฑ ุงูุฃุฎุฑู */
            opacity: 0; /* ุฌุนู ุงูุนูุตุฑ ุดูุงูุงู */
            pointer-events: none; /* ููุน ุงูุชูุงุนู ูุน ุงูุนูุตุฑ */
            transition: opacity 0.5s ease-in-out; /* ุชุฃุซูุฑ ุงูุชุญูู ุงูุณูุณ */
        }

        /* ุฅุธูุงุฑ ุฃููููุงุช ุงูุชุญูู ุนูุฏ ุงูุชูุงู ุงููุนุจุฉ */
        #controls-container.visible {
            opacity: 1; /* ุฌุนู ุงูุนูุตุฑ ูุฑุฆูุงู ุชูุงูุงู */
            pointer-events: auto; /* ุงูุณูุงุญ ุจุงูุชูุงุนู ูุน ุงูุนูุตุฑ */
        }

        /* ุฃููููุฉ ุงูุชุญูู */
        .control-icon {
            cursor: pointer; /* ุชุบููุฑ ุดูู ุงููุคุดุฑ ุนูุฏ ุงูุชุญููู */
            width: 50px; /* ุนุฑุถ ุงูุฃููููุฉ */
            height: 50px; /* ุงุฑุชูุงุน ุงูุฃููููุฉ */
            transition: transform 0.2s; /* ุชุฃุซูุฑ ุงูุชุญูู ุงูุณูุณ */
        }

        .control-icon:hover {
            transform: scale(1.1); /* ุชูุจูุฑ ุงูุฃููููุฉ ุนูุฏ ุงูุชุญููู */
        }

        /* ุงูุจุงูููุงุช */
        .balloon {
            position: fixed; /* ูุถุน ุงูุจุงููู ูู ููุถุน ุซุงุจุช */
            width: 40px; /* ุนุฑุถ ุงูุจุงููู */
            height: 60px; /* ุงุฑุชูุงุน ุงูุจุงููู */
            background-color: #ff4136; /* ููู ุงูุฎูููุฉ */
            border-radius: 50%; /* ุฌุนู ุงูุนูุตุฑ ุฏุงุฆุฑูุงู */
            bottom: -80px; /* ูุถุน ุงูุจุงููู ุฃุณูู ุงูุดุงุดุฉ */
            z-index: 20; /* ุชุฑุชูุจ ุงูุนูุตุฑ ููู ุงูุนูุงุตุฑ ุงูุฃุฎุฑู */
            box-shadow: inset -8px -8px 0 rgba(0, 0, 0, 0.2); /* ุฅุถุงูุฉ ุธู ุฏุงุฎูู */
            opacity: 0.8; /* ุดูุงููุฉ ุงูุจุงููู */
            pointer-events: none; /* ููุน ุงูุชูุงุนู ูุน ุงูุนูุตุฑ */
        }

        .balloon:before {
            content: ""; /* ุฅุถุงูุฉ ูุญุชูู ูููู */
            position: absolute; /* ูุถุน ุงููุญุชูู ูู ููุถุน ูุทูู */
            bottom: -5px; /* ุงููุณุงูุฉ ูู ุงูุฃุณูู */
            left: 50%; /* ุชุญุฏูุฏ ุงูููุถุน ุงูุฃูุณุฑ ุจูุณุจุฉ 50% */
            transform: translateX(-50%); /* ุชูุณูุท ุงูุนูุตุฑ ุฃูููุงู */
            width: 8px; /* ุนุฑุถ ุงูุนูุตุฑ */
            height: 8px; /* ุงุฑุชูุงุน ุงูุนูุตุฑ */
            background-color: inherit; /* ุงุณุชุฎุฏุงู ููุณ ููู ุงูุฎูููุฉ */
            border-radius: 0 0 50% 50%; /* ุฌุนู ุงูุฒูุงูุง ุงูุณูููุฉ ุฏุงุฆุฑูุฉ */
            z-index: -1; /* ูุถุน ุงูุนูุตุฑ ุฎูู ุงูุจุงููู */
        }

        /* ุญุฑูุฉ ุงูุจุงูููุงุช */
        @keyframes float {
            0% {
                transform: translateY(0) rotate(5deg); /* ุงูููุถุน ุงูุงุจุชุฏุงุฆู */
                opacity: 0.6; /* ุงูุดูุงููุฉ ุงูุงุจุชุฏุงุฆูุฉ */
            }

            50% {
                transform: translateY(-150vh) rotate(-5deg); /* ุงูููุถุน ุงูุฃูุณุท */
                opacity: 1; /* ุงูุดูุงููุฉ ุงููุชูุณุทุฉ */
            }

            100% {
                transform: translateY(-300vh) rotate(10deg); /* ุงูููุถุน ุงูููุงุฆู */
                opacity: 0.4; /* ุงูุดูุงููุฉ ุงูููุงุฆูุฉ */
            }
        }

        /* ุฃููุงู ูููุงูุน ุงูุจุงูููุงุช ุงููุฎุชููุฉ */
        .balloon:nth-child(odd) {
            animation: float 3s ease-in-out infinite alternate; /* ุญุฑูุฉ ุงูุจุงูููุงุช ุงููุฑุฏูุฉ */
        }

        .balloon:nth-child(even) {
            animation: float 4s ease-in-out infinite alternate-reverse; /* ุญุฑูุฉ ุงูุจุงูููุงุช ุงูุฒูุฌูุฉ */
        }

        .balloon:nth-child(3n+1) {
            background-color: #ffc107; /* ููู ุงูุจุงููู */
        }

        .balloon:nth-child(3n+2) {
            background-color: #007bff; /* ููู ุงูุจุงููู */
        }

        .balloon:nth-child(3n+3) {
            background-color: #28a745; /* ููู ุงูุจุงููู */
        }
    </style>
</head>

<body>
    <div id="controls-container">
        <img src="images/home.png" alt="Home" class="control-icon" id="home-icon">
        <img src="images/again.png" alt="Again" class="control-icon" id="again-icon">
    </div>

    <h1>ูุนุจุฉ ุจุงุฒู 4x4</h1>
    <p>ูู ุจุณุญุจ ุฃุฌุฒุงุก ุงูุตูุฑุฉ ุฅูู ุงูุฃูุงูู ุงูุตุญูุญุฉ.</p>
    
    <div class="game-container">
        <div id="solution-container"></div>
        <div id="puzzle-container"></div>
    </div>
    
    <div id="message"></div>
    
    <audio id="correct-sound" src="sounds/correct.mp3"></audio>
    <audio id="wrong-sound" src="sounds/wrong.mp3"></audio>
    <audio id="bravoo-sound" src="sounds/bravoo.mp3"></audio>

    
    <script>
        // ููุง ูุจุฏุฃ ููุฏ JavaScript ุงูุฎุงุต ุจุงููุนุจุฉ
        const IMAGE_COUNT_PER_LEVEL = 10; // ุนุฏุฏ ุงูุตูุฑ ุงููุชุงุญุฉ ูู ูุฐุง ุงููุณุชูู
        const START_IMAGE_INDEX = 21; // ุฑูู ุฃูู ุตูุฑุฉ ูู ูุฐุง ุงููุณุชูู
        const END_IMAGE_INDEX = 30; // ุฑูู ุขุฎุฑ ุตูุฑุฉ ูู ูุฐุง ุงููุณุชูู
        let availableImages = []; // ูุตูููุฉ ูุชุฎุฒูู ุฃุฑูุงู ุงูุตูุฑ ุงููุชุงุญุฉ
        let currentImageIndex; // ููุฑุณ ุงูุตูุฑุฉ ุงูุญุงููุฉ

        const puzzleContainer = document.getElementById('puzzle-container'); // ุญุงููุฉ ูุทุน ุงูุจุงุฒู
        const solutionContainer = document.getElementById('solution-container'); // ุญุงููุฉ ุงูุญู
        const message = document.getElementById('message'); // ุนูุตุฑ ุฑุณุงูุฉ ุงูููุฒ
        const correctSound = document.getElementById('correct-sound'); // ุนูุตุฑ ุงูุตูุช ุงูุตุญูุญ
        const wrongSound = document.getElementById('wrong-sound'); // ุนูุตุฑ ุงูุตูุช ุงูุฎุงุทุฆ
        const bravooSound = document.getElementById('bravoo-sound'); // ุนูุตุฑ ุตูุช ุงูููุฒ
        const controlsContainer = document.getElementById('controls-container'); // ุญุงููุฉ ุงูุฃููููุงุช
        const againIcon = document.getElementById('again-icon'); // ุฃููููุฉ ุงููุนุจ ูุฑุฉ ุฃุฎุฑู
        const homeIcon = document.getElementById('home-icon'); // ุฃููููุฉ ุงูุฑุฌูุน ููุตูุญุฉ ุงูุฑุฆูุณูุฉ
        const totalPieces = 16; // ุฅุฌูุงูู ุนุฏุฏ ุงููุทุน (4x4)
        let currentDrag = null; // ุงููุทุนุฉ ุงูุชู ูุชู ุณุญุจูุง ุญุงููุงู
        let originalParent = null; // ุงูุญุงููุฉ ุงูุฃุตููุฉ ูููุทุนุฉ

        // ุฏุงูุฉ ูุฅูุดุงุก ูุงุฆูุฉ ุจุงูุตูุฑ ุงููุชุงุญุฉ
        function initializeAvailableImages() {
            availableImages = []; // ุฅุนุงุฏุฉ ุชููุฆุฉ ุงููุตูููุฉ
            for (let i = START_IMAGE_INDEX; i <= END_IMAGE_INDEX; i++) {
                availableImages.push(i); // ุฅุถุงูุฉ ุฃุฑูุงู ุงูุตูุฑ ุฅูู ุงููุตูููุฉ
            }
            shuffleArray(availableImages); // ุฎูุท ุชุฑุชูุจ ุงูุตูุฑ
        }

        // ุฏุงูุฉ ุฅูุดุงุก ุงููุนุจุฉ
        function createPuzzle() {
            puzzleContainer.innerHTML = ''; // ุชูุฑูุบ ุญุงููุฉ ูุทุน ุงูุจุงุฒู
            solutionContainer.innerHTML = ''; // ุชูุฑูุบ ุญุงููุฉ ุงูุญู
            message.textContent = ''; // ุฅุฒุงูุฉ ุฑุณุงูุฉ ุงูููุฒ
            puzzleContainer.classList.remove('hidden'); // ุฅุธูุงุฑ ุญุงููุฉ ูุทุน ุงูุจุงุฒู
            solutionContainer.classList.remove('solved'); // ุฅุฒุงูุฉ ุญุงูุฉ ุงูุญู ูู ุงูุญุงููุฉ
            solutionContainer.style.backgroundImage = 'none'; // ุฅุฒุงูุฉ ุตูุฑุฉ ุงูุฎูููุฉ
            controlsContainer.classList.remove('visible'); // ุฅุฎูุงุก ุฃููููุงุช ุงูุชุญูู
            stopBalloons(); // ุฅููุงู ุงูุจุงูููุงุช

            if (availableImages.length === 0) {
                initializeAvailableImages(); // ุฅุนุงุฏุฉ ุชููุฆุฉ ูุงุฆูุฉ ุงูุตูุฑ ุฅุฐุง ุงูุชูุช
            }

            currentImageIndex = availableImages.shift(); // ุงุฎุชูุงุฑ ุฃูู ุตูุฑุฉ ูู ุงููุงุฆูุฉ ูุฅุฒุงูุชูุง
            const imageSrc = `images/photo${currentImageIndex}.png`; // ูุณุงุฑ ุงูุตูุฑุฉ
            let pieces = []; // ูุตูููุฉ ูุชุฎุฒูู ูุทุน ุงูุจุงุฒู

            for (let i = 0; i < totalPieces; i++) {
                const piece = document.createElement('div'); // ุฅูุดุงุก ุนูุตุฑ div ููู ูุทุนุฉ
                piece.className = 'puzzle-piece'; // ุชุนููู ูุฆุฉ CSS
                piece.draggable = true; // ุฌุนู ุงููุทุนุฉ ูุงุจูุฉ ููุณุญุจ
                piece.setAttribute('data-index', i); // ุชุนููู ููุฑุณ ุงููุทุนุฉ

                const row = Math.floor(i / 4); // ุญุณุงุจ ุฑูู ุงูุตู
                const col = i % 4; // ุญุณุงุจ ุฑูู ุงูุนููุฏ
                piece.style.backgroundImage = `url(${imageSrc})`; // ุชุนููู ุตูุฑุฉ ุงูุฎูููุฉ
                piece.style.backgroundPosition = `-${col * 100}px -${row * 100}px`; // ุชุญุฏูุฏ ููุถุน ุงูุฌุฒุก ูู ุงูุตูุฑุฉ
                piece.style.backgroundSize = `400px 400px`; // ุชุญุฏูุฏ ุญุฌู ุงูุตูุฑุฉ ุงูุฃุตููุฉ

                pieces.push(piece); // ุฅุถุงูุฉ ุงููุทุนุฉ ูููุตูููุฉ
            }

            shuffleArray(pieces); // ุฎูุท ุชุฑุชูุจ ุงููุทุน
            pieces.forEach(piece => puzzleContainer.appendChild(piece)); // ุฅุถุงูุฉ ุงููุทุน ุฅูู ุญุงููุฉ ุงูุจุงุฒู

            for (let i = 0; i < totalPieces; i++) {
                const dropZone = document.createElement('div'); // ุฅูุดุงุก ุนูุตุฑ div ููู ูุฑุจุน ุฅููุงุช
                dropZone.className = 'drop-zone'; // ุชุนููู ูุฆุฉ CSS
                dropZone.setAttribute('data-index', i); // ุชุนููู ููุฑุณ ูุฑุจุน ุงูุฅููุงุช
                solutionContainer.appendChild(dropZone); // ุฅุถุงูุฉ ูุฑุจุน ุงูุฅููุงุช ุฅูู ุญุงููุฉ ุงูุญู
            }
        }

        // ุฏุงูุฉ ุฎูุท ุงููุตูููุฉ (Fisher-Yates shuffle)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1)); // ุงุฎุชูุงุฑ ุนูุตุฑ ุนุดูุงุฆู
                [array[i], array[j]] = [array[j], array[i]]; // ุชุจุฏูู ุงูุนูุตุฑูู
            }
        }

        // ุงูุงุณุชูุงุน ูุฃุญุฏุงุซ ุงูุณุญุจ ูุงูุฅููุงุช
        puzzleContainer.addEventListener('dragstart', (e) => {
            if (e.target.classList.contains('puzzle-piece')) {
                currentDrag = e.target; // ุชุฎุฒูู ุงููุทุนุฉ ุงูุชู ูุชู ุณุญุจูุง
                originalParent = e.target.parentElement; // ุชุฎุฒูู ุงูุญุงููุฉ ุงูุฃุตููุฉ
                e.dataTransfer.setData('text/plain', e.target.dataset.index); // ุชุนููู ุจูุงูุงุช ุงูุณุญุจ
                e.target.classList.add('dragging'); // ุฅุถุงูุฉ ูุฆุฉ CSS ุฃุซูุงุก ุงูุณุญุจ
            }
        });

        puzzleContainer.addEventListener('dragend', (e) => {
            if (e.target.classList.contains('puzzle-piece')) {
                e.target.classList.remove('dragging'); // ุฅุฒุงูุฉ ูุฆุฉ CSS ุจุนุฏ ุงูุชูุงุก ุงูุณุญุจ
            }
        });

        solutionContainer.addEventListener('dragover', (e) => {
            e.preventDefault(); // ููุน ุงูุณููู ุงูุงูุชุฑุงุถู ูููุชุตูุญ
            if (e.target.classList.contains('drop-zone') && e.target.children.length === 0) {
                e.target.classList.add('hovered'); // ุฅุถุงูุฉ ูุฆุฉ CSS ุนูุฏ ุงูุชุญููู
            }
        });

        solutionContainer.addEventListener('dragleave', (e) => {
            if (e.target.classList.contains('drop-zone')) {
                e.target.classList.remove('hovered'); // ุฅุฒุงูุฉ ูุฆุฉ CSS ุนูุฏ ูุบุงุฏุฑุฉ ุงููุฑุจุน
            }
        });

        solutionContainer.addEventListener('drop', (e) => {
            e.preventDefault(); // ููุน ุงูุณููู ุงูุงูุชุฑุงุถู ูููุชุตูุญ
            if (e.target.classList.contains('drop-zone') && e.target.children.length === 0) {
                const draggedIndex = currentDrag.dataset.index; // ููุฑุณ ุงููุทุนุฉ ุงููุณุญูุจุฉ
                const dropZoneIndex = e.target.dataset.index; // ููุฑุณ ูุฑุจุน ุงูุฅููุงุช

                e.target.classList.remove('hovered'); // ุฅุฒุงูุฉ ูุฆุฉ CSS ุจุนุฏ ุงูุฅููุงุช

                if (draggedIndex === dropZoneIndex) { // ุงูุชุญูู ูู ุชุทุงุจู ุงูููุงุฑุณ
                    e.target.appendChild(currentDrag); // ุฅุถุงูุฉ ุงููุทุนุฉ ุฅูู ูุฑุจุน ุงูุฅููุงุช
                    currentDrag.draggable = false; // ุฌุนู ุงููุทุนุฉ ุบูุฑ ูุงุจูุฉ ููุณุญุจ ูุฑุฉ ุฃุฎุฑู
                    correctSound.play(); // ุชุดุบูู ุตูุช ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ
                    checkWinCondition(); // ุงูุชุญูู ูู ุญุงูุฉ ุงูููุฒ
                } else {
                    originalParent.appendChild(currentDrag); // ุฅุนุงุฏุฉ ุงููุทุนุฉ ุฅูู ููุงููุง ุงูุฃุตูู
                    wrongSound.play(); // ุชุดุบูู ุตูุช ุงูุฅุฌุงุจุฉ ุงูุฎุงุทุฆุฉ
                }
            }
        });

        // ุฏุงูุฉ ุงูุชุญูู ูู ุงูููุฒ
        function checkWinCondition() {
            let allCorrect = true; // ูุชุบูุฑ ููุชุญูู ูู ุฌููุน ุงููุทุน
            const dropZones = document.querySelectorAll('#solution-container .drop-zone'); // ุฌููุน ูุฑุจุนุงุช ุงูุฅููุงุช

            dropZones.forEach(zone => {
                // ุงูุชุญูู ูู ุฃู ุงููุฑุจุน ูุญุชูู ุนูู ูุทุนุฉ ูุฃู ููุฑุณูุง ุตุญูุญ
                if (zone.children.length === 0 || zone.children[0].dataset.index !== zone.dataset.index) {
                    allCorrect = false; // ุฅุฐุง ูุงู ููุงู ุฎุทุฃุ ูู ุจุชุนููู ุงููุชุบูุฑ ุฅูู false
                }
            });

            if (allCorrect) { // ุฅุฐุง ูุงูุช ุฌููุน ุงููุทุน ุตุญูุญุฉ
                message.textContent = '๐ ุชูุงูููุง! ููุฏ ุฃุชููุช ุงููููุฉ ุจูุฌุงุญ ๐'; // ุนุฑุถ ุฑุณุงูุฉ ุงูููุฒ
                bravooSound.play(); // ุชุดุบูู ุตูุช ุงูุงุญุชูุงู
                showCompleteImage(); // ุนุฑุถ ุงูุตูุฑุฉ ุงููุงููุฉ
                startBalloons(); // ุจุฏุก ุชุฃุซูุฑ ุงูุจุงูููุงุช
                controlsContainer.classList.add('visible'); // ุฅุธูุงุฑ ุฃููููุงุช ุงูุชุญูู
            }
        }

        // ุฏุงูุฉ ุนุฑุถ ุงูุตูุฑุฉ ุงููุงููุฉ
        function showCompleteImage() {
            puzzleContainer.classList.add('hidden'); // ุฅุฎูุงุก ุญุงููุฉ ูุทุน ุงูุจุงุฒู
            solutionContainer.innerHTML = ''; // ุชูุฑูุบ ุญุงููุฉ ุงูุญู
            solutionContainer.classList.add('solved'); // ุฅุถุงูุฉ ูุฆุฉ CSS ูุนุฑุถ ุงูุตูุฑุฉ ุงููุงููุฉ
            solutionContainer.style.backgroundImage = `url(images/photo${currentImageIndex}.png)`; // ุชุนููู ุงูุตูุฑุฉ ูุฎูููุฉ
        }

        // ุฏุงูุฉ ุจุฏุก ุงูุจุงูููุงุช ุจุดูู ูุชูุงุซุฑ ูุฌููู
        function startBalloons() {
            const numberOfBalloons = 50; // ุนุฏุฏ ุงูุจุงูููุงุช
            for (let i = 0; i < numberOfBalloons; i++) {
                const balloon = document.createElement('div'); // ุฅูุดุงุก ุนูุตุฑ div ููู ุจุงููู
                balloon.className = 'balloon'; // ุชุนููู ูุฆุฉ CSS
                balloon.style.left = `${Math.random() * 100}vw`; // ุชุญุฏูุฏ ููุถุน ุฃููู ุนุดูุงุฆู
                balloon.style.backgroundColor = getRandomColor(); // ุชุนููู ููู ุนุดูุงุฆู
                balloon.style.animationDelay = `${Math.random() * 2}s`; // ุชุฃุฎูุฑ ุนุดูุงุฆู ูุจุฏุก ุงูุญุฑูุฉ
                balloon.style.animationDuration = `${3 + Math.random() * 3}s`; // ูุฏุฉ ุญุฑูุฉ ุนุดูุงุฆูุฉ
                document.body.appendChild(balloon); // ุฅุถุงูุฉ ุงูุจุงููู ุฅูู ุงูุตูุญุฉ
            }
        }

        // ุฏุงูุฉ ููุญุตูู ุนูู ููู ุนุดูุงุฆู ููุจุงูููุงุช
        function getRandomColor() {
            const colors = ['#ff4136', '#ffc107', '#007bff', '#28a745', '#17a2b8', '#6f42c1', '#fd7e14', '#20c997', '#e83e8c']; // ูุงุฆูุฉ ุงูุฃููุงู
            return colors[Math.floor(Math.random() * colors.length)]; // ุงุฎุชูุงุฑ ููู ุนุดูุงุฆู
        }

        // ุฏุงูุฉ ุฅููุงู ุงูุจุงูููุงุช
        function stopBalloons() {
            document.querySelectorAll('.balloon').forEach(balloon => balloon.remove()); // ุฅุฒุงูุฉ ุฌููุน ุนูุงุตุฑ ุงูุจุงููู
        }

        // ูุนุงูุฌุฉ ุงูููุฑ ุนูู ุฃููููุงุช ุงูุชุญูู
        againIcon.addEventListener('click', () => {
            createPuzzle(); // ุฅุนุงุฏุฉ ุชุดุบูู ุงููุนุจุฉ
        });

        homeIcon.addEventListener('click', () => {
            window.location.href = 'levels.html'; // ุงูุงูุชูุงู ุฅูู ุตูุญุฉ ุงููุณุชููุงุช
        });

        // ุนูุฏ ุชุญููู ุงูุตูุญุฉ
        window.onload = () => {
            initializeAvailableImages(); // ุชููุฆุฉ ูุงุฆูุฉ ุงูุตูุฑ
            createPuzzle(); // ุจุฏุก ุงููุนุจุฉ
        };
    </script>
</body>

</html>