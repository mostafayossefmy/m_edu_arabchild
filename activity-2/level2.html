<!DOCTYPE html>
<html lang="ar">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„Ø¹Ø¨Ø© Ø¨Ø§Ø²Ù„ 3x3</title>
    <style>
        /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø¬Ø³Ù… ÙˆØ§Ù„ØµÙØ­Ø© */
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
            overflow: hidden;
            position: relative;
            background-image: url('images/bg_level3.png');
            /* ØªØ¹Ø¯ÙŠÙ„: ØµÙˆØ±Ø© Ø§Ù„Ø®Ù„ÙÙŠØ© Ù„Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø«Ø§Ù„Ø« */
            background-size: cover;
            background-repeat: no-repeat;
        }

        /* Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† ÙˆØ§Ù„Ù†ØµÙˆØµ */
        h1,
        p {
            display: none;
        }

        /* Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
        .game-container {
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            width: 100%;
            flex-direction: row;
            /* ØªØ±ØªÙŠØ¨ Ø§Ù„Ø­Ø§ÙˆÙŠØ§Øª Ø£ÙÙ‚ÙŠØ§Ù‹ */
            gap: 20px;
            /* Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† Ø­Ø§ÙˆÙŠØ§Øª Ø§Ù„ÙŠÙ…ÙŠÙ† ÙˆØ§Ù„Ø­Ù„ ÙˆØ§Ù„ÙŠØ³Ø§Ø± */
        }

        /* Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ù…Ø±Ø¨Ø¹Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (Ø§Ù„Ø­Ù„) */
        #solution-container {
            display: grid;
            grid-template-columns: repeat(3, 100px);
            /* 3 Ø£Ø¹Ù…Ø¯Ø© Ø¨Ø­Ø¬Ù… 100 Ø¨ÙƒØ³Ù„ */
            grid-template-rows: repeat(3, 100px);
            /* 3 ØµÙÙˆÙ Ø¨Ø­Ø¬Ù… 100 Ø¨ÙƒØ³Ù„ */
            gap: 5px;
            border: 2px solid #ccc;
            padding: 5px;
            background-color: #fff;
            min-height: 320px;
            /* ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ Ù„ÙŠØªÙ†Ø§Ø³Ø¨ Ù…Ø¹ Ø§Ù„Ø´Ø¨ÙƒØ© 3x3 */
            z-index: 10;
            transition: all 0.5s ease-in-out;
        }

        /* ØªÙ†Ø³ÙŠÙ‚ Ø­Ø§ÙˆÙŠØ§Øª Ø§Ù„Ù‚Ø·Ø¹ */
        .puzzle-container {
            display: flex;
            flex-wrap: wrap;
            /* Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ù„Ù Ø§Ù„Ù‚Ø·Ø¹ */
            gap: 5px;
            transition: opacity 0.5s ease-in-out;
            z-index: 10;
        }

        #puzzle-container-left,
        #puzzle-container-right {
            flex-direction: column;
            /* ØªØ±ØªÙŠØ¨ Ø§Ù„Ù‚Ø·Ø¹ Ø¹Ù…ÙˆØ¯ÙŠØ§Ù‹ */
            align-items: center;
            /* ØªÙˆØ³ÙŠØ· Ø§Ù„Ù‚Ø·Ø¹ Ø£ÙÙ‚ÙŠØ§Ù‹ */
        }

        #puzzle-container-bottom {
            flex-direction: row;
            /* ØªØ±ØªÙŠØ¨ Ø§Ù„Ù‚Ø·Ø¹ Ø£ÙÙ‚ÙŠØ§Ù‹ */
            justify-content: center;
            /* ØªÙˆØ³ÙŠØ· Ø§Ù„Ù‚Ø·Ø¹ Ø£ÙÙ‚ÙŠØ§Ù‹ */
            margin-top: 20px;
            width: 310px;
            /* Ù†ÙØ³ Ø¹Ø±Ø¶ Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø­Ù„ Ù„ØªÙˆØ³ÙŠØ·Ù‡Ø§ */
        }

        /* ØªÙ†Ø³ÙŠÙ‚ Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø­Ù„ ÙƒØµÙˆØ±Ø© ÙˆØ§Ø­Ø¯Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ */
        #solution-container.solved {
            display: block;
            width: 310px;
            /* ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø­Ø¬Ù… Ù„ÙŠØªÙ†Ø§Ø³Ø¨ Ù…Ø¹ 3x3 (3*100px + 2*5px gap) */
            height: 310px;
            /* ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø­Ø¬Ù… Ù„ÙŠØªÙ†Ø§Ø³Ø¨ Ù…Ø¹ 3x3 */
            background-size: cover;
            background-position: center;
            padding: 0;
            border: none;
        }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¥ÙÙ„Ø§Øª (Ù…Ø±Ø¨Ø¹ ÙØ§Ø±Øº) */
        .drop-zone {
            width: 100px;
            height: 100px;
            background-color: #eee;
            border: 2px dashed #999;
            box-sizing: border-box;
        }

        .drop-zone.hovered {
            background-color: #d0d0d0;
            border-color: #333;
        }

        .drop-zone .puzzle-piece {
            border: none;
            cursor: default;
        }

        /* Ø¥Ø®ÙØ§Ø¡ Ø­Ø§ÙˆÙŠØ§Øª Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ */
        .puzzle-container.hidden {
            opacity: 0;
            pointer-events: none;
            height: 0;
            padding: 0;
            margin: 0;
            overflow: hidden;
        }

        /* Ù‚Ø·Ø¹Ø© Ø§Ù„Ø¨Ø§Ø²Ù„ (Ø¬Ø²Ø¡ Ù…Ù† Ø§Ù„ØµÙˆØ±Ø©) */
        .puzzle-piece {
            width: 100px;
            height: 100px;
            background-size: 300px 300px;
            /* ØªØ¹Ø¯ÙŠÙ„ Ø­Ø¬Ù… Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø£ØµÙ„ÙŠØ© (3x3) */
            cursor: grab;
            border: 1px solid #ddd;
            box-sizing: border-box;
            transition: transform 0.2s ease-in-out;
        }

        .puzzle-piece.dragging {
            opacity: 0.7;
            border: 2px dashed #333;
        }

        /* Ø±Ø³Ø§Ù„Ø© Ø§Ù„ÙÙˆØ² */
        #message {
            position: absolute;
            top: 20px;
            font-size: 30px;
            font-weight: bold;
            color: green;
            z-index: 10;
            text-align: center;
            width: 100%;
        }

        /* Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„ØªØ­ÙƒÙ… */
        #controls-container {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 30px;
            z-index: 15;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease-in-out;
        }

        #controls-container.visible {
            opacity: 1;
            pointer-events: auto;
        }

        .control-icon {
            cursor: pointer;
            width: 50px;
            height: 50px;
            transition: transform 0.2s;
        }

        .control-icon:hover {
            transform: scale(1.1);
        }

        /* Ø§Ù„Ø¨Ø§Ù„ÙˆÙ†Ø§Øª ÙˆØªØ£Ø«ÙŠØ±Ø§ØªÙ‡Ø§ */
        .balloon {
            position: fixed;
            width: 40px;
            height: 60px;
            background-color: #ff4136;
            border-radius: 50%;
            bottom: -80px;
            z-index: 20;
            box-shadow: inset -8px -8px 0 rgba(0, 0, 0, 0.2);
            opacity: 0.8;
            pointer-events: none;
        }

        .balloon:before {
            content: "";
            position: absolute;
            bottom: -5px;
            left: 50%;
            transform: translateX(-50%);
            width: 8px;
            height: 8px;
            background-color: inherit;
            border-radius: 0 0 50% 50%;
            z-index: -1;
        }

        @keyframes float {
            0% {
                transform: translateY(0) rotate(5deg);
                opacity: 0.6;
            }

            50% {
                transform: translateY(-150vh) rotate(-5deg);
                opacity: 1;
            }

            100% {
                transform: translateY(-300vh) rotate(10deg);
                opacity: 0.4;
            }
        }

        .balloon:nth-child(odd) {
            animation: float 3s ease-in-out infinite alternate;
        }

        .balloon:nth-child(even) {
            animation: float 4s ease-in-out infinite alternate-reverse;
        }

        .balloon:nth-child(3n+1) {
            background-color: #ffc107;
        }

        .balloon:nth-child(3n+2) {
            background-color: #007bff;
        }

        .balloon:nth-child(3n+3) {
            background-color: #28a745;
        }
    </style>
</head>

<body>
    <div id="controls-container">
        <img src="images/home.png" alt="Home" class="control-icon" id="home-icon">
        <img src="images/again.png" alt="Again" class="control-icon" id="again-icon">
    </div>

    <h1>Ù„Ø¹Ø¨Ø© Ø¨Ø§Ø²Ù„ 3x3</h1>
    <p>Ù‚Ù… Ø¨Ø³Ø­Ø¨ Ø£Ø¬Ø²Ø§Ø¡ Ø§Ù„ØµÙˆØ±Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø£Ù…Ø§ÙƒÙ† Ø§Ù„ØµØ­ÙŠØ­Ø©.</p>

    <div class="game-container">
        <div id="puzzle-container-left" class="puzzle-container"></div>
        <div id="solution-container"></div>
        <div id="puzzle-container-right" class="puzzle-container"></div>
    </div>
    <div id="puzzle-container-bottom" class="puzzle-container"></div>
    <div id="message"></div>
    <audio id="correct-sound" src="sounds/correct.mp3"></audio>
    <audio id="wrong-sound" src="sounds/wrong.mp3"></audio>
    <audio id="bravoo-sound" src="sounds/bravoo.mp3"></audio>

    <script>
        // Ù‡Ù†Ø§ ÙŠØ¨Ø¯Ø£ ÙƒÙˆØ¯ JavaScript Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„Ù„Ø¹Ø¨Ø©
        const puzzleContainerLeft = document.getElementById('puzzle-container-left'); // Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ù‚Ø·Ø¹ Ø¹Ù„Ù‰ Ø§Ù„ÙŠØ³Ø§Ø±
        const puzzleContainerRight = document.getElementById('puzzle-container-right'); // Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ù‚Ø·Ø¹ Ø¹Ù„Ù‰ Ø§Ù„ÙŠÙ…ÙŠÙ†
        const puzzleContainerBottom = document.getElementById('puzzle-container-bottom'); // Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ù‚Ø·Ø¹ ÙÙŠ Ø§Ù„Ø£Ø³ÙÙ„
        const solutionContainer = document.getElementById('solution-container'); // Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø­Ù„ (Ø§Ù„Ù…Ø±Ø¨Ø¹Ø§Øª Ø§Ù„ÙØ§Ø±ØºØ©)
        const message = document.getElementById('message'); // Ø±Ø³Ø§Ù„Ø© Ø§Ù„ÙÙˆØ²
        const correctSound = document.getElementById('correct-sound'); // ØµÙˆØª Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©
        const wrongSound = document.getElementById('wrong-sound'); // ØµÙˆØª Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ø®Ø§Ø·Ø¦Ø©
        const bravooSound = document.getElementById('bravoo-sound'); // ØµÙˆØª Ø§Ù„ÙÙˆØ²
        const controlsContainer = document.getElementById('controls-container'); // Ø­Ø§ÙˆÙŠØ© Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„ØªØ­ÙƒÙ…
        const againIcon = document.getElementById('again-icon'); // Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©
        const homeIcon = document.getElementById('home-icon'); // Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

        const totalPieces = 9; // ØªØ¹Ø¯ÙŠÙ„: Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹ ÙÙŠ Ø¨Ø§Ø²Ù„ 3x3
        const START_IMAGE_INDEX = 21; // ØªØ¹Ø¯ÙŠÙ„: ÙÙ‡Ø±Ø³ Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„ØµÙˆØ± Ù„Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ (Ù…Ù† 21)
        const END_IMAGE_INDEX = 30; // ØªØ¹Ø¯ÙŠÙ„: ÙÙ‡Ø±Ø³ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„ØµÙˆØ± Ù„Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ (Ø¥Ù„Ù‰ 30)
        let imageOrder = []; // Ù…ØµÙÙˆÙØ© Ù„ØªØ®Ø²ÙŠÙ† ØªØ±ØªÙŠØ¨ Ø§Ù„ØµÙˆØ± Ø§Ù„Ø¹Ø´ÙˆØ§Ø¦ÙŠ
        let currentImagePosition = 0; // Ù…Ø¤Ø´Ø± Ù„Ù„ØµÙˆØ±Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© ÙÙŠ Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¹Ø´ÙˆØ§Ø¦ÙŠ

        let currentDrag = null; // Ù…ØªØºÙŠØ± Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù‚Ø·Ø¹Ø© Ø§Ù„ØªÙŠ ÙŠØªÙ… Ø³Ø­Ø¨Ù‡Ø§ Ø­Ø§Ù„ÙŠÙ‹Ø§
        let originalParent = null; // Ù…ØªØºÙŠØ± Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø£ØµÙ„ÙŠØ© Ù„Ù„Ù‚Ø·Ø¹Ø©

        // Ø¯Ø§Ù„Ø© Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
        function createPuzzle() {
            // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù„Ø¹Ø¨Ø© Ù„Ù…Ø±Ø­Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©
            puzzleContainerLeft.innerHTML = ''; // Ù…Ø³Ø­ Ù‚Ø·Ø¹ Ø§Ù„Ø¨Ø§Ø²Ù„ Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© Ù…Ù† Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„ÙŠØ³Ø±Ù‰
            puzzleContainerRight.innerHTML = ''; // Ù…Ø³Ø­ Ù‚Ø·Ø¹ Ø§Ù„Ø¨Ø§Ø²Ù„ Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© Ù…Ù† Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„ÙŠÙ…Ù†Ù‰
            puzzleContainerBottom.innerHTML = ''; // Ù…Ø³Ø­ Ù‚Ø·Ø¹ Ø§Ù„Ø¨Ø§Ø²Ù„ Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© Ù…Ù† Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø³ÙÙ„ÙŠØ©
            solutionContainer.innerHTML = ''; // Ù…Ø³Ø­ Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ø¥ÙÙ„Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©
            message.textContent = ''; // Ù…Ø³Ø­ Ø±Ø³Ø§Ù„Ø© Ø§Ù„ÙÙˆØ²
            puzzleContainerLeft.classList.remove('hidden'); // Ø¥Ø¸Ù‡Ø§Ø± Ø­Ø§ÙˆÙŠØ§Øª Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡
            puzzleContainerRight.classList.remove('hidden');
            puzzleContainerBottom.classList.remove('hidden');
            solutionContainer.classList.remove('solved'); // Ø¥Ø²Ø§Ù„Ø© Ø­Ø§Ù„Ø© "ØªÙ… Ø§Ù„Ø­Ù„"
            solutionContainer.style.backgroundImage = 'none'; // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø©
            controlsContainer.classList.remove('visible'); // Ø¥Ø®ÙØ§Ø¡ Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„ØªØ­ÙƒÙ…
            stopBalloons(); // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø¨Ø§Ù„ÙˆÙ†Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©

            const currentImage = imageOrder.length > 0 ? imageOrder[currentImagePosition] : START_IMAGE_INDEX; // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø±Ù‚Ù… Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
            const imageSrc = `images/photo${currentImage}.png`; // ØªØ­Ø¯ÙŠØ¯ Ù…Ø³Ø§Ø± Ø§Ù„ØµÙˆØ±Ø©
            let pieces = []; // Ù…ØµÙÙˆÙØ© Ù„ØªØ®Ø²ÙŠÙ† Ù‚Ø·Ø¹ Ø§Ù„Ø¨Ø§Ø²Ù„

            // Ø­Ù„Ù‚Ø© Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø£Ø¬Ø²Ø§Ø¡ Ø§Ù„ØµÙˆØ±Ø©
            for (let i = 0; i < totalPieces; i++) {
                const piece = document.createElement('div'); // Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù†ØµØ± <div>
                piece.className = 'puzzle-piece'; // Ø¥Ø¶Ø§ÙØ© ÙØ¦Ø© Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù‚Ø·Ø¹Ø©
                piece.draggable = true; // Ø¬Ø¹Ù„ Ø§Ù„Ù‚Ø·Ø¹Ø© Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø³Ø­Ø¨
                piece.setAttribute('data-index', i); // ØªØ¹ÙŠÙŠÙ† ÙÙ‡Ø±Ø³ Ø§Ù„Ù‚Ø·Ø¹Ø© ÙƒØ®Ø§ØµÙŠØ© Ø¨ÙŠØ§Ù†Ø§Øª

                const row = Math.floor(i / 3); // ØªØ¹Ø¯ÙŠÙ„: Ø­Ø³Ø§Ø¨ Ø±Ù‚Ù… Ø§Ù„ØµÙ Ù„Ø´Ø¨ÙƒØ© 3x3
                const col = i % 3; // ØªØ¹Ø¯ÙŠÙ„: Ø­Ø³Ø§Ø¨ Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…ÙˆØ¯ Ù„Ø´Ø¨ÙƒØ© 3x3
                piece.style.backgroundImage = `url(${imageSrc})`; // ØªØ¹ÙŠÙŠÙ† Ø§Ù„ØµÙˆØ±Ø© ÙƒØ®Ù„ÙÙŠØ©
                piece.style.backgroundPosition = `-${col * 100}px -${row * 100}px`; // ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆØ¶Ø¹ Ø§Ù„Ø¬Ø²Ø¡ Ù…Ù† Ø§Ù„ØµÙˆØ±Ø©

                pieces.push(piece); // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù‚Ø·Ø¹Ø© Ù„Ù„Ù…ØµÙÙˆÙØ©
            }

            shuffleArray(pieces); // Ø®Ù„Ø· ØªØ±ØªÙŠØ¨ Ø§Ù„Ù‚Ø·Ø¹ Ø¹Ø´ÙˆØ§Ø¦ÙŠØ§Ù‹

            // ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù‚Ø·Ø¹ Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø§ÙˆÙŠØ§Øª Ø§Ù„Ø«Ù„Ø§Ø«
            for (let i = 0; i < 3; i++) {
                puzzleContainerLeft.appendChild(pieces[i]);
            }
            for (let i = 3; i < 6; i++) {
                puzzleContainerRight.appendChild(pieces[i]);
            }
            for (let i = 6; i < 9; i++) {
                puzzleContainerBottom.appendChild(pieces[i]);
            }

            // Ø­Ù„Ù‚Ø© Ù„Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ø¥ÙÙ„Ø§Øª
            for (let i = 0; i < totalPieces; i++) {
                const dropZone = document.createElement('div'); // Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù†ØµØ± <div>
                dropZone.className = 'drop-zone'; // Ø¥Ø¶Ø§ÙØ© ÙØ¦Ø© Ù„ØªÙ†Ø³ÙŠÙ‚ Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¥ÙÙ„Ø§Øª
                dropZone.setAttribute('data-index', i); // ØªØ¹ÙŠÙŠÙ† ÙÙ‡Ø±Ø³ Ø§Ù„Ù…Ù†Ø·Ù‚Ø©
                solutionContainer.appendChild(dropZone); // Ø¥Ø¶Ø§ÙØ© Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¥ÙÙ„Ø§Øª Ø¥Ù„Ù‰ Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø­Ù„
            }
        }

        // Ø¯Ø§Ù„Ø© Ø®Ù„Ø· Ø§Ù„Ù…ØµÙÙˆÙØ© (Fisher-Yates shuffle)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1)); // Ø§Ø®ØªÙŠØ§Ø± ÙÙ‡Ø±Ø³ Ø¹Ø´ÙˆØ§Ø¦ÙŠ
                [array[i], array[j]] = [array[j], array[i]]; // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø¹Ù†Ø§ØµØ±
            }
        }

        // Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø³Ø­Ø¨ ÙˆØ§Ù„Ø¥ÙÙ„Ø§Øª
        document.addEventListener('dragstart', (e) => {
            if (e.target.classList.contains('puzzle-piece')) {
                currentDrag = e.target;
                originalParent = e.target.parentElement;
                e.dataTransfer.setData('text/plain', e.target.dataset.index);
                e.target.classList.add('dragging');
            }
        });

        document.addEventListener('dragend', (e) => {
            if (currentDrag) {
                currentDrag.classList.remove('dragging');
                currentDrag = null;
                originalParent = null;
            }
        });

        solutionContainer.addEventListener('dragover', (e) => {
            e.preventDefault();
            if (e.target.classList.contains('drop-zone') && e.target.children.length === 0) {
                e.target.classList.add('hovered');
            }
        });

        solutionContainer.addEventListener('dragleave', (e) => {
            if (e.target.classList.contains('drop-zone')) {
                e.target.classList.remove('hovered');
            }
        });

        solutionContainer.addEventListener('drop', (e) => {
            e.preventDefault();
            if (e.target.classList.contains('drop-zone') && e.target.children.length === 0) {
                const draggedIndex = currentDrag.dataset.index;
                const dropZoneIndex = e.target.dataset.index;

                e.target.classList.remove('hovered');

                if (draggedIndex === dropZoneIndex) {
                    e.target.appendChild(currentDrag);
                    currentDrag.draggable = false;
                    correctSound.play();
                    checkWinCondition();
                } else {
                    originalParent.appendChild(currentDrag); // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù‚Ø·Ø¹Ø© Ù„Ù…ÙƒØ§Ù†Ù‡Ø§ Ø§Ù„Ø£ØµÙ„ÙŠ ÙÙŠ Ø­Ø§Ù„Ø© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ø®Ø§Ø·Ø¦Ø©
                    wrongSound.play();
                }
            }
        });

        // Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ÙÙˆØ²
        function checkWinCondition() {
            let allCorrect = true;
            const dropZones = document.querySelectorAll('#solution-container .drop-zone');

            dropZones.forEach(zone => {
                if (zone.children.length === 0 || zone.children[0].dataset.index !== zone.dataset.index) {
                    allCorrect = false;
                }
            });

            if (allCorrect) {
                message.textContent = 'ğŸ‰ ØªÙ‡Ø§Ù†ÙŠÙ†Ø§! Ù„Ù‚Ø¯ Ø£ØªÙ…Ù…Øª Ø§Ù„Ù…Ù‡Ù…Ø© Ø¨Ù†Ø¬Ø§Ø­ ğŸ‰';
                bravooSound.play();
                showCompleteImage();
                startBalloons();
                controlsContainer.classList.add('visible');
            }
        }

        // Ø¯Ø§Ù„Ø© Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø©
        function showCompleteImage() {
            // Ø¥Ø®ÙØ§Ø¡ Ø¬Ù…ÙŠØ¹ Ø­Ø§ÙˆÙŠØ§Øª Ø§Ù„Ù‚Ø·Ø¹
            document.querySelectorAll('.puzzle-container').forEach(container => {
                container.classList.add('hidden');
            });
            solutionContainer.innerHTML = '';
            solutionContainer.classList.add('solved');
            const currentImage = imageOrder.length > 0 ? imageOrder[currentImagePosition] : START_IMAGE_INDEX;
            solutionContainer.style.backgroundImage = `url(images/photo${currentImage}.png)`;
        }

        // Ø¯Ø§Ù„Ø© Ø¨Ø¯Ø¡ Ø§Ù„Ø¨Ø§Ù„ÙˆÙ†Ø§Øª
        function startBalloons() {
            const numberOfBalloons = 50;
            for (let i = 0; i < numberOfBalloons; i++) {
                const balloon = document.createElement('div');
                balloon.className = 'balloon';
                balloon.style.left = `${Math.random() * 100}vw`;
                balloon.style.backgroundColor = getRandomColor();
                balloon.style.animationDelay = `${Math.random() * 2}s`;
                balloon.style.animationDuration = `${3 + Math.random() * 3}s`;
                document.body.appendChild(balloon);
            }
        }

        // Ø¯Ø§Ù„Ø© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù„ÙˆÙ† Ø¹Ø´ÙˆØ§Ø¦ÙŠ Ù„Ù„Ø¨Ø§Ù„ÙˆÙ†Ø§Øª
        function getRandomColor() {
            const colors = ['#ff4136', '#ffc107', '#007bff', '#28a745', '#17a2b8', '#6f42c1', '#fd7e14', '#20c997', '#e83e8c'];
            return colors[Math.floor(Math.random() * colors.length)];
        }

        // Ø¯Ø§Ù„Ø© Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø¨Ø§Ù„ÙˆÙ†Ø§Øª
        function stopBalloons() {
            document.querySelectorAll('.balloon').forEach(balloon => balloon.remove());
        }

        // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø¹Ø¯Ø§Ø¯ ØªØ±ØªÙŠØ¨ Ø§Ù„ØµÙˆØ± Ø§Ù„Ø¹Ø´ÙˆØ§Ø¦ÙŠ
        function setupImageOrder() {
            imageOrder = [];
            for (let i = START_IMAGE_INDEX; i <= END_IMAGE_INDEX; i++) {
                imageOrder.push(i);
            }
            shuffleArray(imageOrder);
            currentImagePosition = 0;
        }

        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„ØªØ­ÙƒÙ…
        againIcon.addEventListener('click', () => {
            currentImagePosition++;
            if (currentImagePosition >= imageOrder.length) {
                setupImageOrder();
            }
            createPuzzle();
        });

        homeIcon.addEventListener('click', () => {
            window.location.href = 'levels.html';
        });

        // Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        window.onload = () => {
            setupImageOrder();
            createPuzzle();
        };


                       // ØªØ¹Ø·ÙŠÙ„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙŠØ§Ù‚ Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø± Ø§Ù„Ø£ÙŠÙ…Ù†
        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
            console.log('ØªÙ… ØªØ¹Ø·ÙŠÙ„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙŠØ§Ù‚ ÙÙŠ Ø§Ù„Ù†Ø´Ø§Ø·!');
        });


    </script>
</body>

</html>